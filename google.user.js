// ==UserScript==
// @name         Google Inner search too Presearch
// @version      1.0.0
// @description  Replace inner google search with presearch
// @namespace    https://google.com/
// @match https://www.google.com/*
// @match https://www.google.ad/*
// @match https://www.google.ae/*
// @match https://www.google.com.af/*
// @match https://www.google.com.ag/*
// @match https://www.google.com.ai/*
// @match https://www.google.al/*
// @match https://www.google.am/*
// @match https://www.google.co.ao/*
// @match https://www.google.com.ar/*
// @match https://www.google.as/*
// @match https://www.google.at/*
// @match https://www.google.com.au/*
// @match https://www.google.az/*
// @match https://www.google.ba/*
// @match https://www.google.com.bd/*
// @match https://www.google.be/*
// @match https://www.google.bf/*
// @match https://www.google.bg/*
// @match https://www.google.com.bh/*
// @match https://www.google.bi/*
// @match https://www.google.bj/*
// @match https://www.google.com.bn/*
// @match https://www.google.com.bo/*
// @match https://www.google.com.br/*
// @match https://www.google.bs/*
// @match https://www.google.bt/*
// @match https://www.google.co.bw/*
// @match https://www.google.by/*
// @match https://www.google.com.bz/*
// @match https://www.google.ca/*
// @match https://www.google.cd/*
// @match https://www.google.cf/*
// @match https://www.google.cg/*
// @match https://www.google.ch/*
// @match https://www.google.ci/*
// @match https://www.google.co.ck/*
// @match https://www.google.cl/*
// @match https://www.google.cm/*
// @match https://www.google.cn/*
// @match https://www.google.com.co/*
// @match https://www.google.co.cr/*
// @match https://www.google.com.cu/*
// @match https://www.google.cv/*
// @match https://www.google.com.cy/*
// @match https://www.google.cz/*
// @match https://www.google.de/*
// @match https://www.google.dj/*
// @match https://www.google.dk/*
// @match https://www.google.dm/*
// @match https://www.google.com.do/*
// @match https://www.google.dz/*
// @match https://www.google.com.ec/*
// @match https://www.google.ee/*
// @match https://www.google.com.eg/*
// @match https://www.google.es/*
// @match https://www.google.com.et/*
// @match https://www.google.fi/*
// @match https://www.google.com.fj/*
// @match https://www.google.fm/*
// @match https://www.google.fr/*
// @match https://www.google.ga/*
// @match https://www.google.ge/*
// @match https://www.google.gg/*
// @match https://www.google.com.gh/*
// @match https://www.google.com.gi/*
// @match https://www.google.gl/*
// @match https://www.google.gm/*
// @match https://www.google.gp/*
// @match https://www.google.gr/*
// @match https://www.google.com.gt/*
// @match https://www.google.gy/*
// @match https://www.google.com.hk/*
// @match https://www.google.hn/*
// @match https://www.google.hr/*
// @match https://www.google.ht/*
// @match https://www.google.hu/*
// @match https://www.google.co.id/*
// @match https://www.google.ie/*
// @match https://www.google.co.il/*
// @match https://www.google.im/*
// @match https://www.google.co.in/*
// @match https://www.google.iq/*
// @match https://www.google.is/*
// @match https://www.google.it/*
// @match https://www.google.je/*
// @match https://www.google.com.jm/*
// @match https://www.google.jo/*
// @match https://www.google.co.jp/*
// @match https://www.google.co.ke/*
// @match https://www.google.com.kh/*
// @match https://www.google.ki/*
// @match https://www.google.kg/*
// @match https://www.google.co.kr/*
// @match https://www.google.com.kw/*
// @match https://www.google.kz/*
// @match https://www.google.la/*
// @match https://www.google.com.lb/*
// @match https://www.google.li/*
// @match https://www.google.lk/*
// @match https://www.google.co.ls/*
// @match https://www.google.lt/*
// @match https://www.google.lu/*
// @match https://www.google.lv/*
// @match https://www.google.com.ly/*
// @match https://www.google.co.ma/*
// @match https://www.google.md/*
// @match https://www.google.me/*
// @match https://www.google.mg/*
// @match https://www.google.mk/*
// @match https://www.google.ml/*
// @match https://www.google.com.mm/*
// @match https://www.google.mn/*
// @match https://www.google.ms/*
// @match https://www.google.com.mt/*
// @match https://www.google.mu/*
// @match https://www.google.mv/*
// @match https://www.google.mw/*
// @match https://www.google.com.mx/*
// @match https://www.google.com.my/*
// @match https://www.google.co.mz/*
// @match https://www.google.com.na/*
// @match https://www.google.com.nf/*
// @match https://www.google.com.ng/*
// @match https://www.google.com.ni/*
// @match https://www.google.ne/*
// @match https://www.google.nl/*
// @match https://www.google.no/*
// @match https://www.google.com.np/*
// @match https://www.google.nr/*
// @match https://www.google.nu/*
// @match https://www.google.co.nz/*
// @match https://www.google.com.om/*
// @match https://www.google.com.pa/*
// @match https://www.google.com.pe/*
// @match https://www.google.com.pg/*
// @match https://www.google.com.ph/*
// @match https://www.google.com.pk/*
// @match https://www.google.pl/*
// @match https://www.google.pn/*
// @match https://www.google.com.pr/*
// @match https://www.google.ps/*
// @match https://www.google.pt/*
// @match https://www.google.com.py/*
// @match https://www.google.com.qa/*
// @match https://www.google.ro/*
// @match https://www.google.ru/*
// @match https://www.google.rw/*
// @match https://www.google.com.sa/*
// @match https://www.google.com.sb/*
// @match https://www.google.sc/*
// @match https://www.google.se/*
// @match https://www.google.com.sg/*
// @match https://www.google.sh/*
// @match https://www.google.si/*
// @match https://www.google.sk/*
// @match https://www.google.com.sl/*
// @match https://www.google.sn/*
// @match https://www.google.so/*
// @match https://www.google.sm/*
// @match https://www.google.sr/*
// @match https://www.google.st/*
// @match https://www.google.com.sv/*
// @match https://www.google.td/*
// @match https://www.google.tg/*
// @match https://www.google.co.th/*
// @match https://www.google.com.tj/*
// @match https://www.google.tk/*
// @match https://www.google.tl/*
// @match https://www.google.tm/*
// @match https://www.google.tn/*
// @match https://www.google.to/*
// @match https://www.google.com.tr/*
// @match https://www.google.tt/*
// @match https://www.google.com.tw/*
// @match https://www.google.co.tz/*
// @match https://www.google.com.ua/*
// @match https://www.google.co.ug/*
// @match https://www.google.co.uk/*
// @match https://www.google.com.uy/*
// @match https://www.google.co.uz/*
// @match https://www.google.com.vc/*
// @match https://www.google.co.ve/*
// @match https://www.google.vg/*
// @match https://www.google.co.vi/*
// @match https://www.google.com.vn/*
// @match https://www.google.vu/*
// @match https://www.google.ws/*
// @match https://www.google.rs/*
// @match https://www.google.co.za/*
// @match https://www.google.co.zm/*
// @match https://www.google.co.zw/*
// @match https://www.google.cat/*
// @match https://google.com/*
// @match https://google.ad/*
// @match https://google.ae/*
// @match https://google.com.af/*
// @match https://google.com.ag/*
// @match https://google.com.ai/*
// @match https://google.al/*
// @match https://google.am/*
// @match https://google.co.ao/*
// @match https://google.com.ar/*
// @match https://google.as/*
// @match https://google.at/*
// @match https://google.com.au/*
// @match https://google.az/*
// @match https://google.ba/*
// @match https://google.com.bd/*
// @match https://google.be/*
// @match https://google.bf/*
// @match https://google.bg/*
// @match https://google.com.bh/*
// @match https://google.bi/*
// @match https://google.bj/*
// @match https://google.com.bn/*
// @match https://google.com.bo/*
// @match https://google.com.br/*
// @match https://google.bs/*
// @match https://google.bt/*
// @match https://google.co.bw/*
// @match https://google.by/*
// @match https://google.com.bz/*
// @match https://google.ca/*
// @match https://google.cd/*
// @match https://google.cf/*
// @match https://google.cg/*
// @match https://google.ch/*
// @match https://google.ci/*
// @match https://google.co.ck/*
// @match https://google.cl/*
// @match https://google.cm/*
// @match https://google.cn/*
// @match https://google.com.co/*
// @match https://google.co.cr/*
// @match https://google.com.cu/*
// @match https://google.cv/*
// @match https://google.com.cy/*
// @match https://google.cz/*
// @match https://google.de/*
// @match https://google.dj/*
// @match https://google.dk/*
// @match https://google.dm/*
// @match https://google.com.do/*
// @match https://google.dz/*
// @match https://google.com.ec/*
// @match https://google.ee/*
// @match https://google.com.eg/*
// @match https://google.es/*
// @match https://google.com.et/*
// @match https://google.fi/*
// @match https://google.com.fj/*
// @match https://google.fm/*
// @match https://google.fr/*
// @match https://google.ga/*
// @match https://google.ge/*
// @match https://google.gg/*
// @match https://google.com.gh/*
// @match https://google.com.gi/*
// @match https://google.gl/*
// @match https://google.gm/*
// @match https://google.gp/*
// @match https://google.gr/*
// @match https://google.com.gt/*
// @match https://google.gy/*
// @match https://google.com.hk/*
// @match https://google.hn/*
// @match https://google.hr/*
// @match https://google.ht/*
// @match https://google.hu/*
// @match https://google.co.id/*
// @match https://google.ie/*
// @match https://google.co.il/*
// @match https://google.im/*
// @match https://google.co.in/*
// @match https://google.iq/*
// @match https://google.is/*
// @match https://google.it/*
// @match https://google.je/*
// @match https://google.com.jm/*
// @match https://google.jo/*
// @match https://google.co.jp/*
// @match https://google.co.ke/*
// @match https://google.com.kh/*
// @match https://google.ki/*
// @match https://google.kg/*
// @match https://google.co.kr/*
// @match https://google.com.kw/*
// @match https://google.kz/*
// @match https://google.la/*
// @match https://google.com.lb/*
// @match https://google.li/*
// @match https://google.lk/*
// @match https://google.co.ls/*
// @match https://google.lt/*
// @match https://google.lu/*
// @match https://google.lv/*
// @match https://google.com.ly/*
// @match https://google.co.ma/*
// @match https://google.md/*
// @match https://google.me/*
// @match https://google.mg/*
// @match https://google.mk/*
// @match https://google.ml/*
// @match https://google.com.mm/*
// @match https://google.mn/*
// @match https://google.ms/*
// @match https://google.com.mt/*
// @match https://google.mu/*
// @match https://google.mv/*
// @match https://google.mw/*
// @match https://google.com.mx/*
// @match https://google.com.my/*
// @match https://google.co.mz/*
// @match https://google.com.na/*
// @match https://google.com.nf/*
// @match https://google.com.ng/*
// @match https://google.com.ni/*
// @match https://google.ne/*
// @match https://google.nl/*
// @match https://google.no/*
// @match https://google.com.np/*
// @match https://google.nr/*
// @match https://google.nu/*
// @match https://google.co.nz/*
// @match https://google.com.om/*
// @match https://google.com.pa/*
// @match https://google.com.pe/*
// @match https://google.com.pg/*
// @match https://google.com.ph/*
// @match https://google.com.pk/*
// @match https://google.pl/*
// @match https://google.pn/*
// @match https://google.com.pr/*
// @match https://google.ps/*
// @match https://google.pt/*
// @match https://google.com.py/*
// @match https://google.com.qa/*
// @match https://google.ro/*
// @match https://google.ru/*
// @match https://google.rw/*
// @match https://google.com.sa/*
// @match https://google.com.sb/*
// @match https://google.sc/*
// @match https://google.se/*
// @match https://google.com.sg/*
// @match https://google.sh/*
// @match https://google.si/*
// @match https://google.sk/*
// @match https://google.com.sl/*
// @match https://google.sn/*
// @match https://google.so/*
// @match https://google.sm/*
// @match https://google.sr/*
// @match https://google.st/*
// @match https://google.com.sv/*
// @match https://google.td/*
// @match https://google.tg/*
// @match https://google.co.th/*
// @match https://google.com.tj/*
// @match https://google.tk/*
// @match https://google.tl/*
// @match https://google.tm/*
// @match https://google.tn/*
// @match https://google.to/*
// @match https://google.com.tr/*
// @match https://google.tt/*
// @match https://google.com.tw/*
// @match https://google.co.tz/*
// @match https://google.com.ua/*
// @match https://google.co.ug/*
// @match https://google.co.uk/*
// @match https://google.com.uy/*
// @match https://google.co.uz/*
// @match https://google.com.vc/*
// @match https://google.co.ve/*
// @match https://google.vg/*
// @match https://google.co.vi/*
// @match https://google.com.vn/*
// @match https://google.vu/*
// @match https://google.ws/*
// @match https://google.rs/*
// @match https://google.co.za/*
// @match https://google.co.zm/*
// @match https://google.co.zw/*
// @match https://google.cat/*
// @match https://presearch.org/*
// @author Joao Manuel Ferreira Fernandes
// @github http://github.com/etnepres/presearch_force.git
// @grant none
// ==/UserScript==

(function() {
    'use strict';

    if (window.top === window.self) {
        // Here we are at the top window and we setup our message event listener

        javascript: (function(e, s) {
            e.src = s;
            e.onload = function() {
                jQuery.noConflict();
            };
            document.head.appendChild(e);
        })(document.createElement('script'), '//code.jquery.com/jquery-latest.min.js');

        setTimeout(function(){

            window.addEventListener("message", function(event) {
                if(typeof event.data.presearch != "undefined"){
                    jQuery(document).attr("title", event.data.presearch+" PREs - "+jQuery(document).attr("title"));
                }
            }, false);            

            jQuery('<iframe />');
            jQuery('<iframe />', {
                name: 'frame1',
                id: 'frame1',
                style: 'display:none;',
                src: 'https://presearch.org/images/rf/ban-1.jpg'
            }).appendTo('body');
            
            jQuery('#tsf input').not("#lst-ib").remove();
            jQuery('#tsf').attr("onsubmit", "");
            jQuery('#tsf').attr("action", "https://presearch.org/search");
            jQuery('#lst-ib').attr("name", "term");
        }, 2000);
    }
    else if(window.location.host == "presearch.org"){
        javascript: (function(e, s) {
            e.src = s;
            e.onload = function() {
                jQuery.noConflict();
            };
            document.head.appendChild(e);
        })(document.createElement('script'), '//code.jquery.com/jquery-latest.min.js');

        setTimeout(function(){

            jQuery.get("https://presearch.org/api/user/rewards?" + (new Date).getTime(), function (t) { 
                window.top.postMessage({
                    presearch: JSON.parse(t).credits.toFixed(2)
                }, "*");
            });
        }, 2000);
    }
})();
